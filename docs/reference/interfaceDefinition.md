---
sidebar_position: 40
---

# インタフェース定義

インタフェース定義は REST API のインタフェース仕様を定義するオブジェクトです。 インタフェース定義では、誰がアクセスできるか、どのオブジェクトにアクセスできるか、どの属性が参照可能か、 どの属性を更新可能かを定義できます。

## データ型

インタフェース定義の属性は以下の通りです。

|名前 / 表示名|説明|データ型|修飾子|
|--------|---|----|---|
|name / 名前|インタフェースの名前|string|必須、システムID、一意|
|displayName / 表示名|インタフェースの表示名|string| |
|description / 説明文|インタフェースの説明 -   ヘルプの生成に使用される|string| |
|database / データベース名|対象となるデータベースの名前|string|必須、\[Meta, Repository, RepositorySandbox, System, Master, Sandbox\] のいずれか|
|className / クラス名|対象となるクラスの名前|string|必須、クラス名のいずれか|
|accessLevel / アクセスレベル|インタフェースのアクセスレベル |**full**|制限なし|
|**readWrite**|オブジェクト更新まで（生成・削除禁止）|
|**readOnly**|読み出しのみ|
|**appendOnly**|生成のみ（読み出し・更新・削除禁止）||string|-   必須、\[制限なし, オブジェクト更新まで（生成・削除禁止）, 読み出しのみ, 生成のみ（読み出し・更新・削除禁止）\] のいずれか|
|properties / 属性|インタフェースでアクセス可能な属性の名前のリスト -   読み取りのみの属性も含む。、この値が指定されていない場合は、クラスに定義されているすべての属性が指定されたのと同義となる。、画面上での表示順序および CSVファイル上の列順序はこの配列の順序となる|string\[\]|属性名のいずれか|
|readOnlyProperties / 読み取り専用属性|インタフェースでアクセスが読み取りのみに制限されるな属性の名前のリスト -   アクセスレベルが「読み出しのみ」の場合は指定しても意味が無い|string\[\]|属性名のいずれか|
|propertyNameMapping / 属性名マッピング|[属性名マッピング](_propertyMapping.md)のリスト -   インタフェース上の属性名としてオブジェクト上の属性名と異なったものを付けることができる。、ガジェットは属性名マッピングに非対応。|object\[\]|-   属性名マッピングオブジェクト|
|ACEs / アクセス制御リスト|[アクセス制御エントリ](_ACE.md)のリスト -   ACE はリストの前から順に評価され、マッチするものが見つかった時点で、その ACE に従って、アクセス許可 / 拒否を決定する。、マッチするものが見つからなかった場合はアクセス拒否となる。、[システム設定](_systemSetting.md)でシステム管理者として識別されたユーザは、アクセス制御リストの内容とは関係なく、アクセスが許可される。、上記のことから、リストが空である場合は、システム管理者として識別されたユーザしかアクセスできない。|object\[\]|アクセス制御エントリオブジェクト|
|initializer / 初期化式|画面入力、 CSVアップロードでオブジェクトが新規登録または更新される際にに動作する[属性値導出](_propertyDerivation.md)のリスト -   この導出は API の呼び出し時にサーバ側で実行される、this\(\) で参照されるオブジェクトは、データベース上の更新前のオブジェクトにインタフェースから書き込まれた内容をマージしたものである、属性値導出はインタフェースオブジェクトの initializer 属性の配列の出現順に評価され、後続の this\(\) で参照されるオブジェクトに反映される、条件式の評価結果がfalseの場合、導出式の評価を行わず、initializer 属性の配列内の次の要素の評価を行う|object\[\]|-   アクセスレベルが full, readWrite, appendOnly のときのみ有効、属性値導出オブジェクト|
|filter / フィルタ式|フィルタ式 -   対象となるオブジェクトを抽出する[問い合わせ式](querymongoDB.md)を文字列で指定する。、フィルタ式を用いる場合は、インタフェースを経由して生成できるオブジェクトがフィルタで除外されるような矛盾が起こらないよう、 constructor で調整する必要がある。例えば、ユーザクラスのうち、学生のみを対象とするようなフィルタをかけたインタフェースで は、学生しか新規追加できないように調整する。|string| |
|filterDerivation / フィルタ導出式|フィルタ導出式。対象となるオブジェクトを抽出する[計算式](expression.md)を指定する。、式の実行結果は[問い合わせ式](querymongoDB.md)のオブジェクトでなければならない。、フィルタ式が指定されている場合、両方の条件のANDをフィルタとして使用する。フィルタ導出式を用いる場合は、インタフェースを経由して生成できるオブジェクトがフィルタで除外されるような矛盾が起こらないよう、 constructor で調整する必要がある。例えば、ユーザクラスのうち、学生のみを対象とするようなフィルタをかけたインタフェースで は、学生しか新規追加できないように調整する。|string| |
|argumentType / 引数|インタフェースの引数のタイプ |**none**|引数をとらない通常のインタフェース|
|**partition**|対象となるデータベースを特定の属性の値ごとにパーティションに分割する（詳細については、[パーティションに対するインターフェース](interfaceForPartition.md)を参照）|
|**nestedObjects**|クラス名で指定されているクラスがデータベースの直下ではなく、別のオブジェクトに内包されている場合、オブジェクトごとにパーティションを構成する（詳細については、[内包オブジェクトのインタフェース](connoteObjectInterface.md)を参照）||string|-   \[none, partition, nestedObjects\] のいずれか|
|partitionKeyProperty / 分割キー|インタフェースの引数のタイプが partition である場合に、キーとなる属性の名前|string|必須、属性名のいずれか、引数が partition のときのみ有効|
|targetClass / ネストクラス|インタフェースの引数のタイプが nestedObjects である場合に、対象となるクラスの名前|string|必須、クラス名のいずれか、引数が nestedObjects のときのみ有効|
|targetProperty / ネスト属性|パーティションのタイプが nestedObjects である場合に、対象となる属性の名前|string|必須、属性名のいずれか、引数が nestedObjects のときのみ有効|
|sortProperty / ソート属性|ソート対象となる属性の名前|string|属性名のいずれか|
|sortOrder / ソート順序|ソート順序。ソート属性が指定されており、かつこのプロパティが省略されている場合には、昇順として取り扱う|string|\[昇順, 降順\] のいずれか|
|useAESDecryptedResponse / AES復号化レスポンス使用フラグ|このインタフェースへのリクエスト（参照・追加・更新）が行われた際に、レスポンスオブジェクトのAES暗号化対象属性の値を、復号化した状態（平文）とするかどうかを表す（暗号化設定が"AES"以外の属性は復号化されない。さらに、暗号化設定が"AES"であっても導出式が設定されている場合には、更新伝播設定が行われている場合のマスタデータベース参照を除き、復号化されない。）|boolean| |
|deleteAsUpdate / 削除要求を更新として扱う|削除が要求されると、更新要求に読み替えられる。これにより、オブジェクトが無効となって削除が要求された場合でも、実際には削除せずにオブジェクトの状態だけを削除状態にするいわゆる論理削除を実装することができる。|boolean| |
|useCustomBackendDatabase / 標準以外のバックエンドデータベースを使用する|標準以外のバックエンドデータベースを使用するかどうかを表すフラグです|boolean|アクセスレベルが readOnly の場合のみ有効|
|backendDatabaseCollectionName / バックエンドデータベース参照設定名|このインタフェースが使用するバックエンドデータベース参照設定のIDを指定します。|string|登録済みのバックエンドデータベース参照設定のいずれか|

## REST API パス

このオブジェクトにアクセスする場合の REST API のパスは以下の通りです。

|種別|パス|
|---|---|
|クラスの定義のパス|/IDManager/\_classes/\interfaceDefinition|
|インスタンスのパス|/IDManager/\_interfaces/:interfaceName|
|リポジトリ編集時のパス|/IDManager/\_sandboxInterfaces|

**Parent topic:**[データベース設定](../reference/dbconfig.md)

