---
author: Procube Co.,Ltd.
---

# 属性のグループ化

属性定義では、同一クラス内の属性間の依存関係や排他関係を表現し、ガジェット上で属性の有効 / 無効を自動的に切り替えるようにするために属性をグループ化することができます。

## 概要

属性をグループ化することにより、 Web UI 上で属性間の依存関係や排他関係が適切に表現できます。 属性定義の属性グループ \(propGroupName\) の値ごとに属性グループが作成されます。属性グループの値は他の属性の属性名か属性名とその値を\#を区切り記号として結合したもののいずれかでなければなりません。

## 指定した値による属性グループの有効 / 無効の切り替え

属性グループの値が他の属性名と特定の値を \# を区切り記号として結合したもの（たとえば、 a という属性の値が b であるときの属性グループの名前は "a\#b"）である場合、属性名で指定された属性をリーダ属性と呼び、 \# 以降の値を指定値と呼びます。当該属性はリーダ属性の値が指定値と一致するときのみ有効となります。ただし、リーダ属性は、ブール型か列挙値を持つ文字列型の属性でなければなりません。 リーダ属性がブール型属性の場合は、指定値に true か false を指定できます。 リーダ属性が列挙値を持つ文字列型の属性である場合は、 WebUI では、リーダ属性は列挙値の値毎の排他的なチェックボックスで表現され、チェックボックスがチェックされると、そのグループの属性が有効になります。

## ブール値による属性の有効 / 無効の切り替え

属性グループの値が他の属性名である場合、属性名で指定された属性をリーダ属性と呼びます。当該属性はリーダ属性の値が null でない場合のみ有効となります。ただし、リーダ属性がブール型である場合は、値が false の場合は有効となりません。 WebUI では、リーダ属性の値が入力されたり、チェックボックスにチェックがつけられると、グループの属性が有効になります。

## 属性グループのカスケード

「属性A → \(A が真の場合のみ有効\) 属性B → \(B が真の場合のみ有効\) 属性C」のように、グループをカスケードさせたい場合は、属性グループを連鎖して指定することで、カスケードさせることができます。たとえば、「属性A → \(A が真の場合のみ有効\) 属性B → \(B が真の場合のみ有効\) 属性C」の場合は、 B の属性グループを "A" とし、 C の属性グループを "B" とすることにより、カスケードした有効 / 無効切り替えを実装できます。

## 無効な属性値の保持

属性グループの機能で属性が無効化される場合は、ユーザインタフェース上はコントロールが無効化されたり隠されたりすることで、属性の無効が表現されますが、 API やデータベース上では無効のチェックは行われません。たとえば、「DHCPを使用しない」 = true のときだけ有効になる属性「IPアドレス」の値は「DHCPを使用しない」 = false のときも保持されます。このことで、以下のようなシナリオに対応します。

1.  固定IP で利用するユーザが「DHCPを使用しない」 = true にして「IPアドレス」を指定
2.  一時的に DHCP を使用したいので、「DHCPを使用しない」 = false に変更（このとき「IPアドレス」のテキストボックスはグレーアウトするが値は残っている）
3.  固定IP に戻すために「DHCPを使用しない」 = true に変更（「IPアドレス」に保持されていた値が復活）

## 属性グループの複数指定

属性グループに複数の値が指定されている場合は、どれかの属性グループが有効になると当該属性が有効になります。

## 必須属性の無効化

必須属性が無効化された場合は、無効化のほうが優先して解釈されます。すなわち、属性グループ機能によって無効化されている場合は必須属性でも必須とならず、有効になれば必須である属性となります。
